"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.onCreateWebpackConfig = void 0;

var _faviconsWebpackPlugin = _interopRequireDefault(require("favicons-webpack-plugin"));

var _superstruct = require("superstruct");

var _options = require("./options");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const onCreateWebpackConfig = ({
  actions,
  reporter
}, options) => {
  const [error] = (0, _superstruct.validate)(options, _options.OptionsStruct);

  if (error) {
    return reporter.panic('gatsby-plugin-favicons: Invalid or missing options, please refer to the documentation', error);
  }

  const {
    logo,
    ...rest
  } = options;
  actions.setWebpackConfig({
    plugins: [new _faviconsWebpackPlugin.default({
      inject: false,
      prefix: 'favicons/',
      logo,
      favicons: { ...rest
      }
    })]
  });
};

exports.onCreateWebpackConfig = onCreateWebpackConfig;